# Ответы на вопросы по функционалу системы

## 1. HACCP Plan - как работает?

**HACCP Plan** - это страница управления Критическими Контрольными Точками (CCP).

### Текущий функционал:
- **Просмотр всех CCP** с фильтрацией по уровню риска (high/medium/low) и статусу (active/resolved)
- **Создание новых CCP** через кнопку "Добавить CCP"
- **Редактирование CCP** - клик на запись открывает форму редактирования
- **Связи**: CCP может быть связана с документом или несоответствием
- **История действий**: для каждой CCP хранятся корректирующие действия

### Поля CCP:
- Процесс (например, "Приёмка сырья")
- Опасность (например, "Микробиологическое заражение")
- Уровень риска (high/medium/low)
- Меры контроля
- Корректирующие действия
- Критические лимиты
- Ответственное лицо

### Проблема: **НЕТ ТЕСТОВЫХ ДАННЫХ**
Сейчас в системе нет примеров CCP для демонстрации функционала.

---

## 2. Справочники (Master Data) - что хранится?

**Справочники** - это базовые данные системы.

### Текущие справочники:
1. **Сотрудники** (Employee)
   - Имя, должность, статус (активен/неактивен)
   
2. **Локации** (Location)
   - Названия помещений (цеха, склады)
   
3. **Оборудование** (Equipment)
   - Название, тип, локация
   - Целевая температура и допуск (для холодильников)

### Проблема: **ОГРАНИЧЕННЫЙ ФУНКЦИОНАЛ**
- Нет категорий для сертификатов (химия, оборудование, сырьё)
- Нельзя самостоятельно добавлять/удалять категории
- Сертификаты хранятся в **Реестре документов** (Registry), а не в справочниках

### Где хранятся сертификаты?
Сертификаты находятся в **"Документы для проверок"** (`/registry`):
- Тип объекта: chemicals (химия), raw (сырьё), equipment (оборудование), personnel (персонал)
- Каждый документ привязан к конкретному объекту
- Отслеживается срок действия

---

## 3. Пакет аудитора VS Audit Checklist - в чём разница?

### **Audit Checklist** (`/audit/checklist`)
**Назначение**: Быстрая проверка готовности системы перед аудитом

**Функции**:
- ✅ Метрики готовности (% заполнения журналов, критические отклонения)
- ✅ Статистика по документам (просрочено/истекает)
- ✅ Открытые несоответствия
- ✅ Активные высокие риски (CCP)
- ✅ Быстрые ссылки на все разделы

**Для кого**: Руководитель, технолог - для самопроверки перед аудитом

---

### **Пакет аудитора** (`/audit/package`)
**Назначение**: Готовый пакет документов для предоставления аудитору

**Функции**:
- ✅ Список документов, требующих внимания (просрочено/истекает)
- ✅ Фильтрация и поиск по документам
- ✅ Открытые несоответствия
- ✅ История действий (Audit Log preview)
- ✅ Быстрый доступ к PDF журналов

**Для кого**: Аудитор - получает готовый пакет для проверки

### Разница:
| Параметр | Audit Checklist | Пакет аудитора |
|----------|----------------|----------------|
| Цель | Самопроверка | Предоставление аудитору |
| Метрики | Подробные (%) | Упрощённые (количество) |
| Документы | Ссылки | Таблица с фильтрами |
| Журналы | Ссылки | PDF экспорт |

---

## 4. Документы для проверок VS Пакет для проверки - в чём разница?

### **Документы для проверок** (`/registry`)
**Назначение**: Полный реестр всех документов системы

**Функции**:
- ✅ Все документы (сертификаты, разрешения, медкнижки)
- ✅ Добавление новых документов
- ✅ Редактирование существующих
- ✅ Поиск и фильтрация
- ✅ Управление сроками действия

**Для кого**: Технолог, администратор - для управления документами

---

### **Пакет для проверки** (`/registry/package`)
**Назначение**: Подборка документов для конкретной проверки

**Функции**:
- ✅ Только документы, требующие внимания (просрочено/истекает)
- ✅ Группировка по типу объекта (chemicals, raw, equipment, personnel)
- ✅ Быстрый экспорт для печати
- ✅ Фокус на проблемных документах

**Для кого**: Аудитор, проверяющий - для быстрой оценки состояния

### Разница:
| Параметр | Документы для проверок | Пакет для проверки |
|----------|------------------------|-------------------|
| Объём | Все документы | Только проблемные |
| Действия | Добавление, редактирование | Только просмотр |
| Группировка | По типу объекта | По типу объекта |
| Экспорт | Нет | Да (для печати) |

---

## 5. Кнопка "Назад" - где нужна?

**Проблема**: При переходе на документ или регламент нет кнопки возврата на предыдущую страницу.

**Где нужно добавить**:
- ✅ Страница документа (`/documents/[id]`)
- ✅ Страница регламента (`/workflow/[id]`)
- ✅ Страница CCP (`/haccp-plan/[id]`)
- ✅ Страница несоответствия (`/nonconformities/[id]`)

**Решение**: Добавить компонент `BackButton` с использованием `router.back()` или breadcrumbs с кликабельными ссылками.

---

## Что нужно сделать:

### Приоритет 1 (Критично):
1. ✅ **Добавить тестовые данные для HACCP Plan** (5-10 примеров CCP)
2. ✅ **Добавить кнопки "Назад"** на страницах детального просмотра
3. ✅ **Добавить больше тестовых данных** в справочники и реестр

### Приоритет 2 (Желательно):
4. ⏳ **Улучшить справочники** - добавить управление категориями
5. ⏳ **Добавить подсказки** (tooltips) для объяснения разницы между страницами

---

## Итого:

**HACCP Plan** - управление рисками (CCP)
**Справочники** - базовые данные (сотрудники, оборудование, локации)
**Audit Checklist** - самопроверка готовности
**Пакет аудитора** - готовый пакет для аудитора
**Документы для проверок** - полный реестр документов
**Пакет для проверки** - подборка проблемных документов
